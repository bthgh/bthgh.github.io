<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Create a reusable map using Asp.net MVC, OpenLayers, OSM - BthGh</title><meta name="description" content="In a web application, there can be multiple locations which we need to shows a map. Trust me, writing the same code, again and again, is not an appropriate solution at all. It is going to be your maintenance nightmare when you need to do&hellip;"><meta name="robots" content="index, follow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://bthgh.github.io/create-a-reusable-map-using-aspnet-mvc-openlayers-osm.html"><link rel="alternate" type="application/atom+xml" href="https://bthgh.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://bthgh.github.io/feed.json"><meta property="og:title" content="Create a reusable map using Asp.net MVC, OpenLayers, OSM"><meta property="og:image" content="https://bthgh.github.io/media/posts/2/0.jpg"><meta property="og:site_name" content="BthGh"><meta property="og:description" content="In a web application, there can be multiple locations which we need to shows a map. Trust me, writing the same code, again and again, is not an appropriate solution at all. It is going to be your maintenance nightmare when you need to do&hellip;"><meta property="og:url" content="https://bthgh.github.io/create-a-reusable-map-using-aspnet-mvc-openlayers-osm.html"><meta property="og:type" content="article"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><style>h1,h2,h3,h4,h5,h6,.btn,[type=button],[type=submit],button,.navbar .navbar__menu li,.navbar_mobile_sidebar .navbar__menu li,.feed__author,.post__tag,.post__share>a span,.post__nav-link>span,.footer{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}body,h1,.h1,blockquote,.search__input,.author__name,.author__info>p,.feed__item h2,.post__nav-link{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://bthgh.github.io/assets/css/style.css?v=cc87cb8806c844f0646558fe70d5c5d1"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://bthgh.github.io/create-a-reusable-map-using-aspnet-mvc-openlayers-osm.html"},"headline":"Create a reusable map using Asp.net MVC, OpenLayers, OSM","datePublished":"2018-12-12T11:03","dateModified":"2019-10-06T11:11","image":{"@type":"ImageObject","url":"https://bthgh.github.io/media/posts/2/0.jpg","height":475,"width":1024},"description":"In a web application, there can be multiple locations which we need to shows a map. Trust me, writing the same code, again and again, is not an appropriate solution at all. It is going to be your maintenance nightmare when you need to do&hellip;","author":{"@type":"Person","name":"BthGh"},"publisher":{"@type":"Organization","name":"BthGh"}}</script><script src="https://bthgh.github.io/assets/js/ls.parent-fit.min.js?v=f8467455ea5c88e3e51a4f212d2632bd"></script><script async src="https://bthgh.github.io/assets/js/lazysizes.min.js?v=6a69d476c93de2b78a72acb259abccea"></script><link rel="stylesheet" href="https://bthgh.github.io/assets/css/prism.css?v=b3bfaec9d0062e615043ae160c95194a"></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://bthgh.github.io/">BthGh</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li class="has-submenu"><a href="https://bthgh.github.io/" target="_self" aria-haspopup="true">Article</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://bthgh.github.io/c/" target="_self">C#</a></li><li><a href="https://bthgh.github.io/aspnet-mvc/" target="_self">Asp.Net MVC</a></li></ul></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><form action="https://bthgh.github.io/search.html" class="search__form"><input class="search__input js-search-input" type="search" name="q" placeholder="search..." autofocus="autofocus"></form><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="https://bthgh.github.io/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><figure class="hero__image"><img class="hero__image-img lazyload" data-src="https://bthgh.github.io/media/posts/2/0.jpg" data-srcset="https://bthgh.github.io/media/posts/2/responsive/0-xs.jpg 300w ,https://bthgh.github.io/media/posts/2/responsive/0-sm.jpg 480w ,https://bthgh.github.io/media/posts/2/responsive/0-md.jpg 768w ,https://bthgh.github.io/media/posts/2/responsive/0-lg.jpg 1024w ,https://bthgh.github.io/media/posts/2/responsive/0-xl.jpg 1360w ,https://bthgh.github.io/media/posts/2/responsive/0-2xl.jpg 1600w" data-aspectratio="2.1557894736842105" data-sizes="auto" alt="" height="475" width="1024"></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2018-12-12T11:03">December 12, 2018</time></div><h1>Create a reusable map using Asp.net MVC, OpenLayers, OSM</h1><div class="post__meta post__meta--author"><img class="lazyload post__author-thumb" data-src="https://bthgh.github.io/media/website/BehtashGhazanfari.JPG" alt="BthGh"> <a href="https://bthgh.github.io/authors/bthgh/" class="feed__author invert">BthGh</a></div></div></header></div><div class="wrapper post__entry"><p>In a web application, there can be multiple locations which we need to shows a map. Trust me, writing the same code, again and again, is not an appropriate solution at all. It is going to be your maintenance nightmare when you need to do some changing in your code. So in this article, we are going to create a reusable component in Asp.net MVC to show the map on our web applications as many times as we need. </p><p>We use :</p><ul><li>Openlayers (v5.3.0) (OL)</li><li>Asp.net MVC 5</li><li>OpenStreetMap (OSM)</li></ul><h3>Step 1:</h3><p>First of all, you need to add the OpenLayers library to your project. OL helps you to create interactive maps on web applications. It can display map tiles, vector data, and markers. You can download this library from <a href="https://openlayers.org/download/" target="_blank" rel="nofollow noopener noreferrer">here</a>. </p><h3>Step 2:</h3><p>In the second step, we should add a custom helper that creates the map. Create a folder named <em>App_Code </em>which is a reserved folder name in ASP.NET. In the <em>App_Code</em> folder create a new <em>.cshtml</em> file and name it <em>MyMapComponent.cshtml</em>. Then replace the existing content with the following codes:</p><pre class="language-cs"><code class="language-cs">@helper AddMap()
{
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/Content/ol.css"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>
        .map {
            <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        }
    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/Scripts/ol.js"</span>&gt;&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"map"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"map"</span>&gt;&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span>
        <span class="hljs-keyword">var</span> map = <span class="hljs-keyword">new</span> ol.Map({
            target: <span class="hljs-string">'map'</span>,
            layers: [
                <span class="hljs-keyword">new</span> ol.layer.Tile({
                    source: <span class="hljs-keyword">new</span> ol.source.OSM()
                })
            ],
            view: <span class="hljs-keyword">new</span> ol.View({
                center: ol.proj.fromLonLat([<span class="hljs-number">37.41</span>, <span class="hljs-number">8.82</span>]),
                zoom: <span class="hljs-number">4</span>
            })
        });
    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
}
  </code></pre><p>First, we added <em>js</em> and <em>css</em> files of OL's Library. Then we used <em>&lt;div&gt;</em> HTML element to show the map. You can set any properties to this <em>&lt;div&gt;</em> with <em>css</em> such as height and width.</p><p>To call the helper you created, use following code inside of the view:</p><pre class="language-cs"><code class="language-cs">@<span class="hljs-keyword">MyMapComponent</span>.<span class="hljs-keyword">AddMap</span>()<br></code></pre><h3>Step 3:</h3><p>Let's make our helper more dynamic. To make our helper appropriate for the different type of locations we need to set height and width with input arguments. Also, it is a good idea get longitude and latitude (center of map) and zoom level as input arguments too.</p><p>With this explanation we can change our helper with following codes:</p><pre class="language-cs"><code class="language-cs">@helper AddMap(int height, int width, double longitude, double latitude, int zoomLevel)
{
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/Content/ol.css"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>
        .map {
            <span class="hljs-attribute">height</span>: @height.<span class="hljs-built_in">ToString</span>()<span class="hljs-built_in">px</span>;
            <span class="hljs-attribute">width</span>: @width.<span class="hljs-built_in">ToString</span>()<span class="hljs-built_in">px</span>;
        }
    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/Scripts/ol.js"</span>&gt;&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"map"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"map"</span>&gt;&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span>
        <span class="hljs-keyword">var</span> map = <span class="hljs-keyword">new</span> ol.Map({
            target: <span class="hljs-string">'map'</span>,
            layers: [
                <span class="hljs-keyword">new</span> ol.layer.Tile({
                    source: <span class="hljs-keyword">new</span> ol.source.OSM()
                })
            ],
            view: <span class="hljs-keyword">new</span> ol.View({
                center: ol.proj.fromLonLat([@longitude, @latitude]),
                zoom: @zoomLevel
            })
        });
    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
}
  </code></pre><p>To call the helper you created, use following code inside of the view:</p><pre class="language-cs"><code class="language-cs">@<span class="hljs-keyword">MyMapComponent</span>.<span class="hljs-keyword">AddMap</span>(<span class="hljs-keyword">400</span>, <span class="hljs-number">700</span>, <span class="hljs-number">37.41</span>, <span class="hljs-number">8.82</span>, <span class="hljs-number">4</span>)
  </code></pre><h3>Useful Links:</h3><ul><li><a href="https://www.asp.net/" target="_blank" rel="nofollow noopener noreferrer">Asp.net MVC</a></li><li><a href="https://openlayers.org/" target="_blank" rel="nofollow noopener noreferrer">OpenLayers</a></li><li><a href="https://www.openstreetmap.org/" target="_blank" rel="nofollow noopener noreferrer">OpenStreetMap</a></li></ul></div><footer class="wrapper post__footer"><ul class="post__tag"><li><a href="https://bthgh.github.io/aspnet-mvc/">Asp.Net MVC</a></li><li><a href="https://bthgh.github.io/openlayers/">Openlayers</a></li><li><a href="https://bthgh.github.io/openstreetmap/">OpenStreetMap</a></li></ul><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fbthgh.github.io%2Fcreate-a-reusable-map-using-aspnet-mvc-openlayers-osm.html" class="js-share facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://bthgh.github.io/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2Fbthgh.github.io%2Fcreate-a-reusable-map-using-aspnet-mvc-openlayers-osm.html&amp;title=Create%20a%20reusable%20map%20using%20Asp.net%20MVC%2C%20OpenLayers%2C%20OSM" class="js-share linkedin" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://bthgh.github.io/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://wa.me/?text=Create%20a%20reusable%20map%20using%20Asp.net%20MVC%2C%20OpenLayers%2C%20OSM https%3A%2F%2Fbthgh.github.io%2Fcreate-a-reusable-map-using-aspnet-mvc-openlayers-osm.html" class="js-share whatsapp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://bthgh.github.io/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div><div class="post__bio bio"><img class="lazyload bio__avatar" data-src="https://bthgh.github.io/media/website/BehtashGhazanfari.JPG" alt="BthGh"><div class="bio__info"><h3 class="bio__name"><a href="https://bthgh.github.io/authors/bthgh/" class="invert" rel="author">BthGh</a></h3><p>I am a senior .Net Developer who like to share what ever he learned.</p></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-next"><a href="https://bthgh.github.io/how-to-increase-performance-of-aspnet-mvc.html" class="invert post__nav-link" rel="next"><span>Next</span> How to Increase Performance of Asp.net MVC? </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://bthgh.github.io/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__related related"><div class="wrapper"><h2 class="h5 related__title">You should also read:</h2><article class="related__item"><div class="feed__meta"><time datetime="2018-12-23T23:18" class="feed__date">December 23, 2018</time></div><h3 class="h1"><a href="https://bthgh.github.io/how-to-increase-performance-of-aspnet-mvc.html" class="invert">How to Increase Performance of Asp.net MVC?</a></h3></article></div></div></main><footer class="footer"><div class="footer__copyright">Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener noreferrer">Publii Static CMS</a></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://bthgh.github.io/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://bthgh.github.io/assets/js/scripts.min.js?v=205f40927e4a45297a0b266e50ad78d5"></script><script>var lazyFeaturedImage=function lazyFeaturedImage(){var b=document.querySelectorAll(".hero__image-img");for(var a=0;a<b.length;a++){var c=b[a];c.addEventListener("lazyloaded",function(f){var d=f.target.parentNode;d.classList.add("hero__image--overlay")})}};lazyFeaturedImage();</script><script defer="defer" src="https://bthgh.github.io/assets/js/prism.js?v=e9098cc340bbd7b65feaeb94e9c923ba"></script></body></html>